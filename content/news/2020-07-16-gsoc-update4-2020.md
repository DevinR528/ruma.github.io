+++
title = "The End is Nigh"
date = 2020-07-16
extra.author = "Devin Ragotzy"
+++

This week in the ruma/matrix Google Summer of Code project, I worked on refactoring both `ruma-client-api` and `ruma-events`. After moving some of the larger chunks of the `ruma_api_macro::api::Api::to_tokens` method to helper functions, I spent time removing repetition from the [`Request/Response`](https://github.com/ruma/ruma/pull/109) code generated by the `ruma_api!` macro. For `ruma-events`, the [input parsing](https://github.com/ruma/ruma/pull/121) was changed to only allow valid names for the `Any*Event` enums. Altering the input parsing had the added benefit of replacing all of the string comparison and manipulation with strongly typed comparison and manipulation.

The final few issues to be resolved before a crates.io release can happen are related to redacted events. Support for [redacted events](https://github.com/ruma/ruma/pull/114) was added to the `Any*Event` enums, they now have redacted variants of each event kind. A few follow-up PR's have been merged to fully integrate redacted events into `ruma-events` fixing specific event [deserialization issues](https://github.com/ruma/ruma/pull/128) and splitting the [`UnsignedData`](https://github.com/ruma/ruma/pull/135) struct to `Unsigned` and `RedactedUnsigned`.
