<!DOCTYPE html>
<html>
<head>
<meta content='IE=edge' http_equiv='X-UA-Compatible'>
<meta charset='utf-8'>
<meta content='width=device-width,initial-scale=1' name='viewport'>
<link href='/images/apple-touch-icon-57x57-4fdb8100.png' rel='apple-touch-icon-precomposed' sizes='57x57'>
<link href='/images/apple-touch-icon-114x114-0ba5c2b3.png' rel='apple-touch-icon-precomposed' sizes='114x114'>
<link href='/images/apple-touch-icon-72x72-d9371b56.png' rel='apple-touch-icon-precomposed' sizes='72x72'>
<link href='/images/apple-touch-icon-144x144-bd467b10.png' rel='apple-touch-icon-precomposed' sizes='144x144'>
<link href='/images/apple-touch-icon-60x60-9165d8af.png' rel='apple-touch-icon-precomposed' sizes='60x60'>
<link href='/images/apple-touch-icon-120x120-63f5f0ae.png' rel='apple-touch-icon-precomposed' sizes='120x120'>
<link href='/images/apple-touch-icon-76x76-1025d1ab.png' rel='apple-touch-icon-precomposed' sizes='76x76'>
<link href='/images/apple-touch-icon-152x152-a2a52576.png' rel='apple-touch-icon-precomposed' sizes='152x152'>
<link href='/images/favicon-196x196-0b47bb9f.png' rel='icon' sizes='196x196' type='image/png'>
<link href='/images/favicon-96x96-d739a671.png' rel='icon' sizes='96x96' type='image/png'>
<link href='/images/favicon-32x32-77e1cfca.png' rel='icon' sizes='32x32' type='image/png'>
<link href='/images/favicon-16x16-4aa60318.png' rel='icon' sizes='16x16' type='image/png'>
<link href='/images/favicon-128-6e4707f8.png' rel='icon' sizes='128x128' type='image/png'>
<meta content='Ruma' name='application-name'>
<meta content='#FFFFFF' name='msapplication-TileColor'>
<meta content='/images/mstile-144x144-bd467b10.png' name='msapplication-TileImage'>
<meta content='/images/mstile-70x70-6e4707f8.png' name='msapplication-square70x70logo'>
<meta content='/images/mstile-150x150-d5f0b5e6.png' name='msapplication-square150x150logo'>
<meta content='/images/mstile-310x150-e8749e81.png' name='msapplication-wide310x150logo'>
<meta content='/images/mstile-310x310-ed20b880.png' name='msapplication-square310x310logo'>
<title>This Week in Ruma</title>
<meta content='Ruma is a collection of Matrix applications and libraries written in the Rust programming language.' name='description'>
<link href='https://www.ruma.io/news/page/10/' rel='canonical'>
<link href='/news/feed.atom' rel='alternate' type='application/atom+xml'>
<link href="/stylesheets/site-21a986c4.css" rel="stylesheet" />
</head>
<body class='news news_page news_page_10 news_page_10_index'>
<nav class='navbar navbar-inverse navbar-static-top'>
<div class='container-fluid'>
<ul class='nav navbar-nav navbar-right'>
<li><a href="/" title="Home">Home</a></li>
<li><a href="/news/" title="News">News</a></li>
<li><a href="/status/" title="Project Status">Project Status</a></li>
<li><a href="/projects/" title="Projects">Projects</a></li>
<li><a href="/contributing/" title="How to Contribute">How to Contribute</a></li>
<li><a href="https://liberapay.com/ruma/" title="Donate to Ruma">Donate on Liberapay</a></li>
<li><a href="/docs/" title="Documentation">Documentation</a></li>
</ul>
</div>
</nav>

<div class='container'>
<div class='row'>
<div class='col-md-8 col-md-offset-2'>
<article class='ruma-news' itemscope itemtype='http://schema.org/BlogPosting'>
<meta content='Jimmy Cuadra' itemprop='author'>
<header>
<h1 itemprop='headline'>
<a href="/news/this-week-in-ruma-2016-08-07/" title="This Week in Ruma">This Week in Ruma</a>
<small itemprop='datePublished' value='2016-08-07'>August 07, 2016</small>
</h1>
<p>
<small>by Jimmy Cuadra</small>
</p>
<p>
<strong>Ruma</strong> is a <a href="https://matrix.org">Matrix</a> homeserver, client, and supporting libraries written in the <a href="https://www.rust-lang.org/">Rust</a> programming language. Matrix is an open specification for an online communication protocol. For an overview of the project, visit the <a href="/">home page</a>.
<strong>This Week in Ruma</strong> is a weekly summary of the development of Ruma, published on Sunday nights.
</p>
</header>
<p>This week I began working on upgrading the libraries used by Ruma.
In particular, Diesel and Serde have new minor versions (which prior to 1.0 are effectively major versions.)
I'm also working on integrating ruma-identifiers and the recent round of changes to ruma-events back into Ruma.
Because of library changes, there are a lot of code updates needed.
I got the compiler errors down from about 60 to about 10, but there are a few blocking issues to fix the rest.
These are noted in the section on Rust below.</p>

<h2 id="notable-changes-to-ruma-eventshttpsgithubcomrumaruma-events">Notable changes to <a href="https://github.com/ruma/ruma-events">ruma-events</a></h2>

<ul>
  <li>Replace macro for enum implementation with more straightforward usage of Serde annotations where possible.
This means that <code>Display</code> and <code>FromStr</code> are no longer implemented for these types, but they may not be used by Ruma anyway.
They'll be added back if and when there is an actual need.</li>
</ul>

<h2 id="rust-at-large">Rust at large</h2>

<ul>
  <li><a href="https://github.com/diesel-rs/diesel/pull/394">diesel-rs/diesel#394</a> Remove the <code>Copy</code> constraint from <code>Identifiable</code>.
In Diesel 0.7.0, struct fields representing a database table's primary key must be <code>Copy</code>.
Because strings are used for this in Ruma, this PR must be merged in order to avoid a bunch of otherwise unnecessary newtypes in Ruma.</li>
  <li><a href="https://github.com/iron/body-parser/pull/72">iron/body-parser#72</a>: Bump Serde to 0.8.
Needed due to version conflicts with <code>serde_json::Value</code>.</li>
</ul>

</article>

<article class='ruma-news' itemscope itemtype='http://schema.org/BlogPosting'>
<meta content='Jimmy Cuadra' itemprop='author'>
<header>
<h1 itemprop='headline'>
<a href="/news/this-week-in-ruma-2016-07-31/" title="This Week in Ruma">This Week in Ruma</a>
<small itemprop='datePublished' value='2016-07-31'>July 31, 2016</small>
</h1>
<p>
<small>by Jimmy Cuadra</small>
</p>
<p>
<strong>Ruma</strong> is a <a href="https://matrix.org">Matrix</a> homeserver, client, and supporting libraries written in the <a href="https://www.rust-lang.org/">Rust</a> programming language. Matrix is an open specification for an online communication protocol. For an overview of the project, visit the <a href="/">home page</a>.
<strong>This Week in Ruma</strong> is a weekly summary of the development of Ruma, published on Sunday nights.
</p>
</header>
<p>This week <a href="https://github.com/serde-rs/serde/releases/tag/v0.8.0">serde 0.8.0</a> was released, offering a new serialization API.
Most of the work on Ruma was towards serialization of the ID and event types.
This will support the next step of implementing APIs in the homeserver that take events as user input.
In addition to the changes landed in ruma-events, I've been working on figuring out how to approach Matrix types that are represented as enums in Rust code but involve checking the value of a key in the JSON structure of the serialized form to determine which variant it is.
I hope to get this nailed down and committed by next week's update.</p>

<h2 id="notable-changes-to-ruma-identifiershttpsgithubcomrumaruma-identifiers">Notable changes to <a href="https://github.com/ruma/ruma-identifiers">ruma-identifiers</a></h2>

<ul>
  <li>Implement serialization and deserialization for ID types.</li>
  <li>Change the <code>new</code> constructor to an implementation of <code>TryFrom</code> and add a separate <code>generate</code> constructor for generating new IDs with random localparts.</li>
  <li>Begin running the test suite on Travis CI.</li>
  <li>Publish the crate to crates.io.
ruma-identifiers is the first Ruma component to get a crates.io release!</li>
</ul>

<h2 id="notable-changes-to-ruma-eventshttpsgithubcomrumaruma-events">Notable changes to <a href="https://github.com/ruma/ruma-events">ruma-events</a></h2>

<ul>
  <li>Convert the types of struct fields that represent a Matrix ID from <code>String</code> to the relevant type from ruma-identifiers.</li>
  <li>Manually implement serialization and deserialization for a few enum types where the variant name appears in JSON camel cased.
This was initially done by copy/pasting similar code between types, but was replaced with a macro that reduced a lot of duplication (and actually increased the test suite coverage by testing every single variant of each enum.)</li>
  <li>Begin running the test suite on Travis CI.</li>
</ul>

</article>

<article class='ruma-news' itemscope itemtype='http://schema.org/BlogPosting'>
<meta content='Jimmy Cuadra' itemprop='author'>
<header>
<h1 itemprop='headline'>
<a href="/news/this-week-in-ruma-2016-07-24/" title="This Week in Ruma">This Week in Ruma</a>
<small itemprop='datePublished' value='2016-07-24'>July 24, 2016</small>
</h1>
<p>
<small>by Jimmy Cuadra</small>
</p>
<p>
<strong>Ruma</strong> is a <a href="https://matrix.org">Matrix</a> homeserver, client, and supporting libraries written in the <a href="https://www.rust-lang.org/">Rust</a> programming language. Matrix is an open specification for an online communication protocol. For an overview of the project, visit the <a href="/">home page</a>.
<strong>This Week in Ruma</strong> is a weekly summary of the development of Ruma, published on Sunday nights.
</p>
</header>
<p>This was a relatively quiet week in terms of code changes.
I'm working on nailing down ruma-identifiers in preparation for using it in ruma-events before I start working on serialization in ruma-events, which is needed for the next step in ruma itself.
Serde is about to release 0.8, which has some breaking changes including a revamped API for manually implementing serialization.
I started to learn how it works since I'll need to use it as soon as it's released.</p>

<h2 id="notable-changes-to-ruma-identifiershttpsgithubcomrumaruma-identifiers">Notable changes to <a href="https://github.com/ruma/ruma-identifiers">ruma-identifiers</a></h2>

<ul>
  <li>Add <code>EventId</code>, <code>RoomId</code>, and <code>RoomAliasId</code>.</li>
</ul>

<h2 id="matrix-at-large">Matrix at large</h2>

<ul>
  <li>I discovered that the new spec introduction that includes the grammar for Matrix IDs is missing some important details about event and room IDs.
The spec currently defines them as <code>sigil opaque_id ":" server_name</code> but does not define <code>opaque_id</code> at all.
Certain limitations are important to note for the purposes of parsing and compatibility, such as allowed character set and minimum and maximum lengths.
I think it's also important to disallow characters that would be problematic for display or parsing, such as whitespace, newlines, and colons, which are also used as the delimiter between opaque ID, IP/hostname, and port.
There was already a JIRA issue for specifying these types of IDs, <a href="https://matrix.org/jira/browse/SPEC-389">SPEC-389</a>, so I added my concerns there.</li>
</ul>

<h2 id="rust-at-large">Rust at large</h2>

<ul>
  <li><a href="https://github.com/rust-lang-nursery/rustup.rs/releases/tag/0.4.0">rustup 0.4</a> was released, which contains the change I made previously for allowing arbitrary toolchains to be installed alongside rustup itself.
I'll be using this to improve Ruma's Docker development image.</li>
  <li><a href="https://github.com/serde-rs/serde/pull/462">serde-rs/serde#462</a>: A simple doc fix I made to Serde while looking through the 0.8 changes.</li>
  <li><a href="https://github.com/rust-lang/rfcs/pull/1681">rust-lang/rfcs#1681</a>: Procedural macros 1.1.
Only tangentially related to Ruma, but an important effort that could help in getting Ruma onto stable Rust.</li>
</ul>

</article>

<nav>
<ul class='ruma-pagination'>
<li>
<span>&larr;</span>
<a href="/news/page/9/" rel="prev">Previous</a>
</li>
<li>Page 10</li>
<li>
<a href="/news/page/11/" rel="next">Next</a>
<span>&rarr;</span>
</li>
</ul>
</nav>
</div>
</div>
</div>

<footer class='ruma-footer'>
<div class='container-fluid'>
<ul class='nav'>
<li><a href="https://github.com/ruma">GitHub</a></li>
<li><a href="https://twitter.com/ruma_io">Twitter</a></li>
<li><a href="https://matrix.to/#/#ruma:matrix.org">Matrix room</a></li>
</ul>
</div>
</footer>
<div class='container-fluid'>
<p class='text-center'>
<small>
The source code and content of this website are free and available under the MIT license:
<a href="https://github.com/ruma/www.ruma.io">www.ruma.io</a>
</small>
</p>
</div>
</body>
</html>
